#!/usr/bin/env ruby
$LOAD_PATH.unshift "#{File.expand_path File.dirname __FILE__}/../lib/"
require 'shogimodan'
require 'kconv'

if ARGV.include?("-h")
  puts "usage: #$0 example/hello.modan"
else
  $KCODE = "u" if not defined?(Encoding) # for Ruby 1.8

  if ARGV.size == 0
    srcs = [ARGF.read]
  else
    srcs = ARGV.map{|path| File.read(path)}
  end

  srcs.each do |src|
    ShogiModan.new(src).run
  end
end
